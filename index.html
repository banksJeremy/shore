<!doctype html>
<html lang=en>
	<head>
		<meta charset="utf-8">
		<title>Shore Math Engine</title>
		<link rel=stylesheet href=style.css>
		<script type="text/javascript" src="jquery.js"></script>
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
		<script type="text/javascript" src="mathjax/MathJax.js">
			MathJax.Hub.Config({
				extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
				jax: ["input/TeX", "output/HTML-CSS"],
				tex2jax: {
					inlineMath: [["\\(", "\\)"]],
					displayMath: [["\\[", "\\]"]]
				}
			})
		</script>
		<script type="text/javascript" src="coffeescript.js"></script>
		<script type="text/coffeescript">$ -> # jQuery on DOM ready...
			emPixels = ((element) ->
				"The approximate number of pixels per em in an element."
				
				test_element = $("<div>").css width: "10em"
				test_element.appendTo(element)
				result = parseFloat(test_element.css("width")) / 10
				test_element.remove()
				result
			) $("body") # this element
			
			occurences = (string, target_character) ->
				"The number of occurrences of a given character in a string."
				
				result = 0
				for character in string
					if character == target_character
						result += 1
				result
			
			scale_textarea = ->
				"Set the height of a textarea based on the newlines contained.
				
				(2 + newlines) ems."
				
				ems = occurences($(this).val(), "\n") + 2
				$(this).css("height", ems * emPixels)
			
			$("#input").css overflow: "hidden"
			$("#input").keyup scale_textarea
			$("#input").focus()
			
			$("form").submit ->
				$(".result").text $("#input").val()
				MathJax.Hub.Queue ["Typeset", MathJax.Hub, $(".result").get(0)]
				false # prevent form from being submitted normally
		</script>
	</head>
	<body>
		<div class=centering>
			<div class="content box">
				<h1>
					Shore <span>Math Engine</span>
				</h1>
				
				<form>
					<textarea id=input name=i></textarea>
					<div class=buttons>
						<input type=submit class=submit value="Calculate">
					</div>
				</form>
			</div>
			<div class="result box"></div>
			
			<div class=footer>
				Shore is developed by <a href="mailto:jeremy@jeremybanks.ca">Jeremy Banks</a>, the source and full credits are on <a href="http://github.com/jeremybanks/shore">on GitHub</a>.
			</div>
		</div>
	</body>
</html>
