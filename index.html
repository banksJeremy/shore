<!doctype html>
<html lang=en>
	<head>
		<meta charset="utf-8">
		<title>Shore Math Engine</title>
		<style>
			* {
				margin: 0;
				border: 0;
				padding: 0;
			}
			
			h1 {
				text-shadow: rgba(48, 64, 92, .75) 1px 1px 2px;
				filter: dropshadow(color=#31415c, offx=1, offy=1);
			}
			
			h1 span {
				font-size: 80%;
			}
			
			a {
				color: rgb(255, 255, 200);
			}
			
			body {
				font-family: sans-serif;
				font-size: 125%;
				background: rgb(48, 64, 92);
				text-align: center;
			}
			
			h1, h2, h3, h4, h5, h6 {
				margin: auto;
			}
			
			.centering {
				text-align: left;
				width: 32em;
				max-width: 100%;
				margin: 1em auto;
			}
			
			.box {
				padding: 1em;
				background: rgb(255, 255, 240);
				-webkit-border-radius: .5em;
				-moz-border-radius: .5em;
				border-radius: .5em;
				-webkit-box-shadow: 0 0 4px rgb(255, 255, 240);
				-moz-box-shadow: 0 0 4px rgb(255, 255, 240);
				box-shadow: 0 0 4px rgb(255, 255, 240);
			}
			
			.result.box {
				margin-top: .25em;
			}
			
			.footer {
				color: rgb(255, 255, 240);;
				font-size: 75%;
				text-align: center;
				margin: 1em;
			}
			
			form {
			}
			
			input.submit {
				font-size: large;
				border: 1px solid black;
				-webkit-border-radius: .5em;
				-moz-border-radius: .5em;
				border-radius: .5em;
				padding: .4em;
				font-weight: bold;
				box-shadow: 0 0 2px black;
				-moz-box-shadow: 0 0 2px black;
				-webkit-box-shadow: 0 0 2px black;
				cursor: pointer;
				
				/* using gradient background for a better feel */
				background: #EEEEEE; /* old browsers */
				background: -moz-linear-gradient(top, #EEEEEE 0%, #BBBBBB 100%);
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#EEEEEE), color-stop(100%,#BBBBBB));
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#EEEEEE", endColorstr="#BBBBBB",GradientType=0 );
				
			}
			
			input.submit:hover {
				box-shadow: 0 0 3px black;
				-moz-box-shadow: 0 0 3px black;
				-webkit-box-shadow: 0 0 3px black;
				
				background: #DDDDDD; /* old browsers */
				background: -moz-linear-gradient(top, #DDDDDD 0%, #AAAAAA 100%);
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#DDDDDD), color-stop(100%,#AAAAAA));
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#DDDDDD", endColorstr="#AAAAAA",GradientType=0 );
			}
			
			input.submit:active {
				box-shadow: 0 0 4px black;
				-moz-box-shadow: 0 0 4px black;
				-webkit-box-shadow: 0 0 4px black;
				
				background: #CCCCCC; /* old browsers */
				background: -moz-linear-gradient(top, #999999 0%, #BBBBBB 100%);
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#999999), color-stop(100%,#BBBBBB));
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#999999", endColorstr="#BBBBBB",GradientType=0 );
			}
			
			#input {
				-webkit-border-radius: .5em;
				-moz-border-radius: .5em;
				border-radius: .5em;
				border: 1px solid black;
				display: block;
				padding: .2em;
				width: 90%;
				margin: .5em auto;
				height: 2em;
				line-height: 1em;
				font-size: 100%;
				-webkit-box-shadow: 0 0 2px black;
				-moz-box-shadow: 0 0 2px black;
				box-shadow: 0 0 2px black;
			}
			
			form .buttons {
				margin-top: .5em;
				text-align: center;
			}
			
			hr {
				border-top: 1px solid gray;
				margin: 1em;
				-webkit-box-shadow: 0 0 2px gray;
				-moz-box-shadow: 0 0 2px gray;
				box-shadow: 0 0 2px gray;
			}
		</style>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="mathjax/MathJax.js">
			MathJax.Hub.Config({
				extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
				jax: ["input/TeX", "output/HTML-CSS"],
				tex2jax: {
					inlineMath: [["$", "$"]],
					displayMath: [["$$", "$$"]]
				}
			})
		</script>
		<script type="text/javascript" src="coffeescript.js"></script>
		<script type="text/coffeescript">$ -> # jQuery on DOM ready...
			emPixels = ((element) ->
				"The approximate number of pixels per em in an element."
				
				test_element = $("<div>").css width: "10em"
				test_element.appendTo(element)
				result = parseFloat(test_element.css("width")) / 10
				test_element.remove()
				result
			) $("body") # this element
			
			occurences = (string, target_character) ->
				"The number of occurrences of a given character in a string."
				
				result = 0
				for character in string
					if character == target_character
						result += 1
				result
			
			scale_textarea = ->
				"Set the height of a textarea based on the newlines contained.
				
				A minum"
				
				ems = occurences($(this).val(), "\n") + 2
				$(this).css("height", ems * emPixels)
			
			$("#input").css overflow: "hidden"
			$("#input").keyup scale_textarea
			$("#input").focus()
			
			$("form").submit ->
				$(".result").text $("#input").val()
				MathJax.Hub.Queue ["Typeset", MathJax.Hub, $(".result").get(0)]
				false # prevent form from being submitted normally
		</script>
	</head>
	<body>
		<div class=centering>
			<div class="content box">
				<h1>
					Shore <span>Math Engine</span>
				</h1>
				
				<form>
					<textarea id=input name=i></textarea>
					<div class=buttons>
						<input type=submit class=submit value="Calculate">
					</div>
				</form>
			</div>
			<div class="result box">
				<p>
					$x + 2 = 9$
					$$ x + 9 = 2$$
				</p>
			</div>
			
			<div class=footer>
				Shore is developed by <a href="mailto:jeremy@jeremybanks.ca">Jeremy Banks</a>, the source and full credits are on <a href="http://github.com/jeremybanks/shore">on GitHub</a>.
			</div>
		</div>
	</body>
</html>
